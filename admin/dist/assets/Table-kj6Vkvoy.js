import{_ as g,b as p,o as d,w as C,ap as k,f as t,c as o,F as c,a5 as h,a as u,k as m,a1 as w}from"./index-ChCAXbjI.js";const y={props:{modelValue:{type:Array,default:()=>[]},config:{type:Object,default:()=>{}},readonly:{type:Boolean,default:!1},context:{type:Object}},emits:["update:modelValue","error"],inject:["debounce"],created(){this.validated=this.debounce(this.validate,500)},computed:{rules(){return[e=>!this.config.min||+(e==null?void 0:e.length)>=+this.config.min||this.$gettext("Minimum are %{num} columns",{num:this.config.min}),e=>!this.config.max||+(e==null?void 0:e.length)<=+this.config.max||this.$gettext("Maximum are %{num} columns",{num:this.config.max})]}},methods:{addCol(e){for(let l of this.modelValue)l.splice(e,0,"");this.$emit("update:modelValue",this.modelValue)},addRow(e){this.modelValue.splice(e,0,new Array((this.modelValue[0]??[]).length).fill("")),this.$emit("update:modelValue",this.modelValue)},rmCol(e){for(let l of this.modelValue)l.splice(e,1);this.$emit("update:modelValue",this.modelValue)},rmRow(e){this.modelValue.splice(e,1),this.$emit("update:modelValue",this.modelValue)},validate(e){this.$emit("error",!this.rules.every(l=>l(e)===!0)),this.$emit("update:modelValue",e)}},watch:{modelValue:{deep:!0,immediate:!0,handler(e){if(!e.length)return this.$emit("update:modelValue",this.config.default??[[""]]);this.validated?this.validated(e):this.validate(e)}}}},v={class:"buttons"},x=["colspan"];function b(e,l,a,B,_,i){return d(),p(k,null,{default:C(()=>[t("tbody",null,[t("tr",null,[l[3]||(l[3]=t("td",null,null,-1)),(d(!0),o(c,null,h(a.modelValue[0]||[],(r,n)=>(d(),o("td",null,[t("div",v,[u(m,{icon:"mdi-plus",onClick:s=>i.addCol(n),variant:"flat"},null,8,["onClick"]),u(m,{icon:"mdi-minus",onClick:s=>i.rmCol(n),variant:"flat"},null,8,["onClick"]),l[2]||(l[2]=t("div",null,null,-1))])]))),256)),t("td",null,[u(m,{icon:"mdi-plus",onClick:l[0]||(l[0]=r=>i.addCol((a.modelValue[0]||[]).length)),variant:"flat"})])]),(d(!0),o(c,null,h(a.modelValue,(r,n)=>(d(),o("tr",null,[t("td",null,[u(m,{icon:"mdi-plus",onClick:s=>i.addRow(n),variant:"flat"},null,8,["onClick"])]),(d(!0),o(c,null,h(r,(s,f)=>(d(),o("td",null,[u(w,{modelValue:a.modelValue[n][f],"onUpdate:modelValue":V=>a.modelValue[n][f]=V,placeholder:a.config.placeholder||"",readonly:a.readonly,"auto-grow":!0,rows:"1",variant:"plain","hide-details":"auto",density:"comfortable"},null,8,["modelValue","onUpdate:modelValue","placeholder","readonly"])]))),256)),t("td",null,[u(m,{icon:"mdi-minus",onClick:s=>i.rmRow(n),variant:"flat"},null,8,["onClick"])])]))),256)),t("tr",null,[t("td",null,[u(m,{icon:"mdi-plus",onClick:l[1]||(l[1]=r=>i.addRow((a.modelValue[0]||[]).length)),variant:"flat"})]),t("td",{colspan:(a.modelValue[0]||[]).length},null,8,x),l[4]||(l[4]=t("td",null,null,-1))])])]),_:1})}const $=g(y,[["render",b],["__scopeId","data-v-e8e9e9c4"]]);export{$ as default};
