import{N as q,O as L,y as K,s as ie,P as de,Q as se,R as ce,S as me,u as N,v as T,U as fe,x as ye,W as pe,X as H,z as R,Y as ve,B as he,C as ge,D as Ve,Z as Pe,E as J,$ as W,a0 as De,H as Y,a as I,m as O,J as C,a1 as Fe,a2 as ke,e as be,h as xe,F as we,_ as Ie,b as Oe,r as Ce,o as Ae}from"./index-DBEQ109X.js";class P{constructor(n,a){this.order=n,this.separator=a}get format(){return this.order.split("").map(n=>`${n}${n}`).join(this.separator).replace("yy","yyyy")}static canBeParsed(n){if(typeof n!="string")return!1;const a=n.toLowerCase();return["y","m","d"].every(r=>a.includes(r))&&["/","-","."].some(r=>n.includes(r))}static parse(n){if(!P.canBeParsed(n))throw new Error(`[${n}] cannot be parsed into date format specification`);const a=n.toLowerCase().split("").filter((u,p,l)=>"dmy".includes(u)&&l.indexOf(u)===p).join(""),r=["/","-","."].find(u=>n.includes(u));return new P(a,r)}}const Se=K({inputFormat:{type:String,validator:e=>!e||P.canBeParsed(e)}},"date-format");function Be(e,n){const a=q();function r(){const m=n.value??"en-US",v=Intl.DateTimeFormat(m,{year:"numeric",month:"2-digit",day:"2-digit"}).format(a.toJsDate(a.parseISO("1999-12-07"))).replace(/(07)|(٠٧)|(٢٩)|(۱۶)|(০৭)/,"dd").replace(/(12)|(١٢)|(٠٨)|(۰۹)|(১২)/,"mm").replace(/(1999)|(2542)|(١٩٩٩)|(١٤٢٠)|(۱۳۷۸)|(১৯৯৯)/,"yyyy").replace(/[^ymd\-/.]/g,"").replace(/\.$/,"");return P.canBeParsed(v)?v:"mm/dd/yyyy"}const u=L(()=>P.canBeParsed(e.inputFormat)?P.parse(e.inputFormat):P.parse(r()));function p(m){function v(o){const s=o.trim().split(u.value.separator);return{y:Number(s[u.value.order.indexOf("y")]),m:Number(s[u.value.order.indexOf("m")]),d:Number(s[u.value.order.indexOf("d")])}}function b(o){const{y:s,m:f,d:h}=o;return!s||!f||!h||f<1||f>12||h<1||h>31?null:{year:k(s),month:f,day:h}}function k(o){const s=a.getYear(a.date());if(o>100||s%100>=50)return o;const f=~~(s/100)*100;return o<50?f+o:f-100+o}const A=v(m),x=b(A);if(!x)return null;const{year:S,month:w,day:i}=x,d=o=>String(o).padStart(2,"0");return a.parseISO(`${S}-${d(w)}-${d(i)}`)}function l(m){return!!p(m)}function F(m){const v=a.toISO(m).split("T")[0].split("-");return u.value.order.split("").map(b=>v["ymd".indexOf(b)]).join(u.value.separator)}return{isValid:l,parseDate:p,formatDate:F,parserFormat:L(()=>u.value.format)}}const Ue=K({displayFormat:{type:[Function,String],default:void 0},location:{type:String,default:"bottom start"},menu:Boolean,menuProps:Object,updateOn:{type:Array,default:()=>["blur","enter"]},pickerProps:Object,...Se(),...Pe({mobile:null}),...Ve(),...ge({hideActions:!0}),...he({prependIcon:"$calendar"}),...R(ve({hideHeader:!0,showAdjacentMonths:!0}),["location","rounded","height","minHeight","maxHeight"])},"VDateInput"),je=ie()({name:"VDateInput",props:Ue(),emits:{save:e=>!0,cancel:()=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,n){let{emit:a,slots:r}=n;const{t:u,current:p}=de(),l=q(),{isValid:F,parseDate:m,formatDate:v,parserFormat:b}=Be(e,p),{mobile:k}=se(e),{InputIcon:A}=ce(e),{clampDate:x,isInAllowedRange:S}=me(e),w=()=>e.multiple?[]:null,i=N(e,"modelValue",w(),t=>Array.isArray(t)?t.map(c=>l.toJsDate(c)):t&&l.toJsDate(t),t=>Array.isArray(t)?t.map(c=>l.date(c)):t&&l.date(t)),d=N(e,"menu"),o=T(!1),s=T(e.focused),f=H(),h=H(["save"]);function B(t){return typeof e.displayFormat=="function"?e.displayFormat(t):e.displayFormat?l.format(t,e.displayFormat??"keyboardDate"):v(t)}const z=C(()=>{const t=ke(i.value);if(!t.length)return null;if(e.multiple===!0)return u("$vuetify.datePicker.itemsSelected",t.length);if(e.multiple==="range"){const c=t[0],g=t[t.length-1];return!l.isValid(c)||!l.isValid(g)?"":`${B(l.date(c))} - ${B(l.date(g))}`}return l.isValid(i.value)?B(l.date(i.value)):""}),Q=C(()=>{if(k.value)return o.value?"text":"none"}),$=C(()=>!e.disabled&&!e.readonly),X=C(()=>e.updateOn.length?!(k.value&&o.value)&&e.readonly:!0);fe(d,t=>{t||(o.value=!1,h.value=["save"])});function Z(t){t.key==="Enter"&&((!d.value||!s.value)&&(d.value=!0),e.updateOn.includes("enter")&&!e.readonly&&_(t.target))}function M(t){e.disabled||(t.preventDefault(),t.stopPropagation(),d.value&&k.value?o.value=!e.readonly:d.value=!0)}function G(){a("cancel"),d.value=!1,o.value=!1}function ee(t){a("save",t),d.value=!1}function te(t){t==null&&(i.value=w())}function ae(t){e.updateOn.includes("blur")&&!e.readonly&&_(t.target),k.value&&o.value&&!s.value&&(d.value=!1,o.value=!1)}function _(t){let{value:c}=t;if(!c.trim())i.value=w();else if(!e.multiple)F(c)&&(i.value=x(m(c)));else{const g=c.trim().split(/\D+-\D+|[^\d\-/.]+/);if(g.every(F))if(e.multiple==="range"){const[U,j]=g.map(m).map(x).toSorted((V,D)=>l.isAfter(V,D)?1:-1);i.value=Fe(l,U,j)}else i.value=g.map(m).filter(S)}}return ye(()=>{const t=!!(e.prependIcon||r.prepend),c=J.filterProps(e),g={...W.filterProps(R(e,["active","bgColor","color","location","rounded","maxWidth","minWidth","width"])),...e.pickerProps},U=De(r,["title","header","day","month","year"]),j=Y.filterProps(R(e,["placeholder"]));return I(Y,O({ref:f},j,{class:["v-date-input",e.class],style:e.style,modelValue:z.value,inputmode:Q.value,placeholder:e.placeholder??b.value,readonly:X.value,onKeydown:$.value?Z:void 0,focused:d.value||s.value,onBlur:ae,validationValue:i.value,"onClick:control":M,"onUpdate:modelValue":te,"onUpdate:focused":V=>s.value=V}),{...r,default:()=>{var V;return be(we,null,[I(xe,O({modelValue:d.value,"onUpdate:modelValue":D=>d.value=D,activator:"parent",minWidth:"0",eager:s.value,location:e.location,closeOnContentClick:!1,openOnClick:!1},e.menuProps),{default:()=>[I(J,O(c,{modelValue:i.value,"onUpdate:modelValue":D=>i.value=D,disabled:h.value,onSave:ee,onCancel:G}),{default:D=>{let{actions:ne,model:E,save:re,cancel:le,isPristine:oe}=D;function ue(y){e.hideActions?(i.value=y,e.multiple||(d.value=!1)):E.value=y,a("save",y),h.value=[]}return I(W,O(g,{modelValue:e.hideActions?i.value:E.value,"onUpdate:modelValue":y=>ue(y),onMousedown:y=>y.preventDefault()}),{...U,actions:e.hideActions?void 0:()=>{var y;return((y=r.actions)==null?void 0:y.call(r,{save:re,cancel:le,isPristine:oe}))??ne()}})}})]}),(V=r.default)==null?void 0:V.call(r)])},prepend:t?V=>r.prepend?r.prepend(V):e.prependIcon&&I(A,{key:"prepend-icon",name:"prepend",tabindex:e["onClick:prepend"]?void 0:-1,onClick:$.value?M:void 0},null):void 0})}),pe({},f)}}),Re={components:{VDateInput:je},props:{modelValue:{type:[Array,Date,String,null]},config:{type:Object,default:()=>{}},assets:{type:Object,default:()=>{}},readonly:{type:Boolean,default:!1},context:{type:Object}},emits:["update:modelValue","error"],computed:{rules(){return[e=>!this.config.required||!!e||this.$gettext("Value is required")]}},watch:{modelValue:{immediate:!0,handler(e){this.$emit("error",!this.rules.every(n=>n(e??this.config.default??null)===!0))}}}};function $e(e,n,a,r,u,p){const l=Ce("v-date-input");return Ae(),Oe(l,{rules:p.rules,readonly:a.readonly,"allowed-dates":a.config.allowed,clearable:!a.readonly&&!a.config.required,max:a.config.max,min:a.config.min,multiple:a.config.multiple,placeholder:a.config.placeholder||null,modelValue:a.modelValue??a.config.default??null,"onUpdate:modelValue":n[0]||(n[0]=F=>e.$emit("update:modelValue",F)),density:"comfortable","hide-details":"auto",variant:"outlined","show-adjacent-months":""},null,8,["rules","readonly","allowed-dates","clearable","max","min","multiple","placeholder","modelValue"])}const _e=Ie(Re,[["render",$e]]);export{_e as default};
