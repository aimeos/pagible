import{s as E,u as $,v as P,x as L,y as M,z as x,A as W,B as H,C as q,D,E as h,G as y,H as C,e as g,a as c,I as K,F as k,m as s,J as b,h as N,_ as R,b as T,r as z,o as G}from"./index-ChaGvduw.js";const J=["prepend","prepend-inner","append","append-inner"],Q=M({hidePip:Boolean,colorPip:Boolean,menuProps:Object,pipIcon:{type:String,default:"$color"},pipLocation:{type:String,default:"prepend",validator:e=>J.includes(e)},pipVariant:{type:String,default:"text"},pickerProps:Object,...D(),...q(),...H(),...x(W(),["location","height","minHeight","maxHeight"])},"VColorInput"),X=E()({name:"VColorInput",props:Q(),emits:{"update:modelValue":e=>!0},setup(e,d){let{slots:a}=d;const t=$(e,"modelValue"),o=P(!1),r=P(e.focused),m=b(()=>!e.disabled&&!e.readonly),p=b(()=>t.value||null);function _(i){if(i.key!=="Enter")return;if(!o.value||!r.value){o.value=!0;return}const v=i.target;t.value=v.value}function f(i){i.preventDefault(),i.stopPropagation(),o.value=!0}function I(){o.value=!1}function F(){o.value=!1}L(()=>{const i=h.filterProps(e),v={...y.filterProps(x(e,["active","bgColor","color","rounded","maxWidth","minWidth","width"])),...e.pickerProps},B=C.filterProps(e),O=e.hidePip?void 0:{[e.pipLocation]:n=>{var l;return g(k,null,[c(K,{class:"v-color-input__pip",color:e.colorPip?t.value:void 0,variant:e.pipVariant,icon:e.pipIcon},null),(l=a[e.pipLocation])==null?void 0:l.call(a,n)])}};return c(C,s(B,{class:["v-color-input",e.class],style:e.style,modelValue:p.value,onKeydown:m.value?_:void 0,focused:o.value||r.value,"onClick:control":e.disabled?void 0:f,"onClick:prependInner":e.disabled?void 0:f,"onUpdate:focused":n=>r.value=n,"onClick:appendInner":e.disabled?void 0:f,"onUpdate:modelValue":n=>{t.value=n}}),{...a,...O,default:()=>{var n;return g(k,null,[c(N,s({modelValue:o.value,"onUpdate:modelValue":l=>o.value=l,activator:"parent",minWidth:"0",closeOnContentClick:!1,openOnClick:!1},e.menuProps),{default:()=>[c(h,s(i,{modelValue:t.value,"onUpdate:modelValue":l=>t.value=l,onSave:I,onCancel:F}),{default:l=>{let{actions:U,model:V,save:A,cancel:S,isPristine:j}=l;function w(u){e.hideActions?t.value=u:V.value=u}return c(y,s(v,{modelValue:e.hideActions?t.value:V.value,"onUpdate:modelValue":u=>w(u)}),{actions:e.hideActions?void 0:()=>{var u;return((u=a.actions)==null?void 0:u.call(a,{save:A,cancel:S,isPristine:j}))??U()}})}})]}),(n=a.default)==null?void 0:n.call(a)])}})})}}),Y={components:{VColorInput:X},props:{modelValue:{type:String},config:{type:Object,default:()=>{}},assets:{type:Object,default:()=>{}},readonly:{type:Boolean,default:!1},context:{type:Object}},emits:["update:modelValue","error"],computed:{rules(){return[e=>!this.config.required||!!e||this.$gettext("Value is required"),e=>!e||/^#[0-9A-F]{6,8}$/i.test(e)||this.$gettext("Value must be a hex color code")]}},watch:{modelValue:{immediate:!0,handler(e){this.$emit("error",!this.rules.every(d=>d(e??this.config.default??"")===!0))}}}};function Z(e,d,a,t,o,r){const m=z("v-color-input");return G(),T(m,{rules:r.rules,clearable:!a.readonly,disabled:a.readonly,modelValue:a.modelValue??a.config.default??"","onUpdate:modelValue":d[0]||(d[0]=p=>e.$emit("update:modelValue",p))},null,8,["rules","clearable","disabled","modelValue"])}const ae=R(Y,[["render",Z]]);export{ae as default};
