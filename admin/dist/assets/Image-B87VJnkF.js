import g from"./File-ChOI_kHS.js";import{F as A}from"./FileDetail-CC8Oiip9.js";import{_ as U,c as V,a as t,w as a,V as p,b as r,T as k,F as I,r as y,o as i,d as n,e as B,n as L,f as N,g as m,a4 as E,h as P,i as R,j as C,k as f,l as s,t as d,m as T,p as c}from"./index-DBEQ109X.js";import"./FileDialog-DJUYzi11.js";import"./ElementListItems-DLYHtmgM.js";import"./PageDetail-C1T1YxaC.js";import"./vue-draggable-plus-BkSmuu_I.js";import"./ElementDetail-CxC1Hwdr.js";const j={extends:g,components:{FileAiDialog:A},setup(){return{...g.setup()}},data(){return{vcreate:!1}},methods:{handle(e,l){return new Promise((v,$)=>{const u=new Image;u.onload=v,u.onerror=$,u.src=this.url(Object.values(e.previews).shift()||e.path)}).then(()=>g.methods.handle.call(this,e,l)).catch(v=>(console.error(v),!1))}}},O=["title"],S={key:1,class:"file"};function z(e,l,v,$,u,F){const w=y("FileDialog"),b=y("FileAiDialog"),D=y("FileUrlDialog");return i(),V(I,null,[t(p,null,{default:a(()=>[t(n,{cols:"12",md:"6"},{default:a(()=>[B("div",{class:L(["files",{readonly:e.readonly}])},[e.file.id?(i(),V("div",{key:0,class:"file",onClick:l[2]||(l[2]=o=>e.open(e.file)),title:e.$gettext("Edit")},[e.file.uploading?(i(),r(N,{key:0,color:"primary",height:"5",indeterminate:"",rounded:""})):m("",!0),e.file.path?(i(),r(E,{key:1,srcset:e.srcset(e.file.previews),src:e.url(e.file.path),draggable:!1},null,8,["srcset","src"])):m("",!0),e.file.id&&!e.readonly?(i(),r(P,{key:2,location:"start"},{activator:a(({props:o})=>[t(f,T(o,{title:e.$gettext("Open menu"),icon:"mdi-dots-vertical",class:"btn-overlay",variant:"text"}),null,16,["title"])]),default:a(()=>[t(R,null,{default:a(()=>[e.auth.can("file:view")?(i(),r(C,{key:0},{default:a(()=>[t(f,{onClick:l[0]||(l[0]=o=>e.open(e.file)),"prepend-icon":"mdi-pencil",variant:"text"},{default:a(()=>[s(d(e.$gettext("Edit")),1)]),_:1})]),_:1})):m("",!0),t(C,null,{default:a(()=>[t(f,{onClick:l[1]||(l[1]=o=>e.remove()),"prepend-icon":"mdi-trash-can",variant:"text"},{default:a(()=>[s(d(e.$gettext("Remove")),1)]),_:1})]),_:1})]),_:1})]),_:1})):m("",!0)],8,O)):e.readonly?m("",!0):(i(),V("div",S,[e.auth.can("file:view")?(i(),r(f,{key:0,onClick:l[3]||(l[3]=o=>e.vfiles=!0),title:e.$gettext("Add file"),icon:"mdi-button-cursor",variant:"text"},null,8,["title"])):m("",!0),t(f,{onClick:l[4]||(l[4]=o=>e.vurls=!0),title:e.$gettext("Add file from URL"),icon:"mdi-link-variant-plus",variant:"text"},null,8,["title"]),e.auth.can("image:imagine")?(i(),r(f,{key:1,onClick:l[5]||(l[5]=o=>u.vcreate=!0),title:e.$gettext("Create file"),icon:"mdi-creation",variant:"text"},null,8,["title"])):m("",!0),t(f,{title:e.$gettext("Upload file"),icon:"mdi-upload",variant:"text"},{default:a(()=>[t(c,{modelValue:e.selected,"onUpdate:modelValue":[l[6]||(l[6]=o=>e.selected=o),l[7]||(l[7]=o=>e.add(o))],accept:e.config.accept||"image/*","hide-input":!0,"prepend-icon":"mdi-upload"},null,8,["modelValue","accept"])]),_:1},8,["title"])]))],2)]),_:1}),e.file.path?(i(),r(n,{key:0,cols:"12",md:"6",class:"meta"},{default:a(()=>[t(p,null,{default:a(()=>[t(n,{cols:"12",md:"3",class:"name"},{default:a(()=>[s(d(e.$gettext("name"))+":",1)]),_:1}),t(n,{cols:"12",md:"9"},{default:a(()=>[s(d(e.file.name),1)]),_:1})]),_:1}),t(p,null,{default:a(()=>[t(n,{cols:"12",md:"3",class:"name"},{default:a(()=>[s(d(e.$gettext("description"))+":",1)]),_:1}),t(n,{cols:"12",md:"9"},{default:a(()=>[s(d(e.description),1)]),_:1})]),_:1}),t(p,null,{default:a(()=>[t(n,{cols:"12",md:"3",class:"name"},{default:a(()=>[s(d(e.$gettext("mime"))+":",1)]),_:1}),t(n,{cols:"12",md:"9"},{default:a(()=>[s(d(e.file.mime),1)]),_:1})]),_:1}),t(p,null,{default:a(()=>[t(n,{cols:"12",md:"3",class:"name"},{default:a(()=>[s(d(e.$gettext("editor"))+":",1)]),_:1}),t(n,{cols:"12",md:"9"},{default:a(()=>[s(d(e.file.editor),1)]),_:1})]),_:1}),t(p,null,{default:a(()=>[t(n,{cols:"12",md:"3",class:"name"},{default:a(()=>[s(d(e.$gettext("updated"))+":",1)]),_:1}),t(n,{cols:"12",md:"9"},{default:a(()=>[s(d(new Date(e.file.updated_at).toLocaleString()),1)]),_:1})]),_:1})]),_:1})):m("",!0)]),_:1}),(i(),r(k,{to:"body"},[t(w,{modelValue:e.vfiles,"onUpdate:modelValue":l[8]||(l[8]=o=>e.vfiles=o),onAdd:l[9]||(l[9]=o=>{F.handle(o),e.vfiles=!1}),filter:{mime:"image/"},grid:""},null,8,["modelValue"])])),(i(),r(k,{to:"body"},[t(b,{modelValue:u.vcreate,"onUpdate:modelValue":l[10]||(l[10]=o=>u.vcreate=o),onAdd:l[11]||(l[11]=o=>{e.select(o),u.vcreate=!1}),context:e.context},null,8,["modelValue","context"])])),(i(),r(k,{to:"body"},[t(D,{modelValue:e.vurls,"onUpdate:modelValue":l[12]||(l[12]=o=>e.vurls=o),onAdd:l[13]||(l[13]=o=>{e.select(o),e.vurls=!1})},null,8,["modelValue"])]))],64)}const X=U(j,[["render",z],["__scopeId","data-v-36cf970b"]]);export{X as default};
