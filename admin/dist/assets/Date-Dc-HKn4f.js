import{u as J,N as K,O as L,s as ie,P as de,Q as se,R as ce,S as fe,v as N,x as T,U as W,y as C,W as me,X as pe,z as ye,Y as ve,A as $,B as he,C as ge,D as Ve,Z as Pe,$ as De,G as Y,a0 as q,a1 as Fe,I as H,a as I,m as j,a2 as ke,f as xe,h as be,F as we,_ as Ie,b as Ce,r as Oe,o as Ae}from"./index-D3wUVYJU.js";class P{constructor(n,a){this.order=n,this.separator=a}get format(){return this.order.split("").map(n=>`${n}${n}`).join(this.separator).replace("yy","yyyy")}static canBeParsed(n){if(typeof n!="string")return!1;const a=n.toLowerCase();return["y","m","d"].every(r=>a.includes(r))&&["/","-","."].some(r=>n.includes(r))}static parse(n){if(!P.canBeParsed(n))throw new Error(`[${n}] cannot be parsed into date format specification`);const a=n.toLowerCase().split("").filter((u,y,l)=>"dmy".includes(u)&&l.indexOf(u)===y).join(""),r=["/","-","."].find(u=>n.includes(u));return new P(a,r)}}const Se=J({inputFormat:{type:String,validator:e=>!e||P.canBeParsed(e)}},"date-format");function Be(e,n){const a=K();function r(){const f=n.value??"en-US",v=Intl.DateTimeFormat(f,{year:"numeric",month:"2-digit",day:"2-digit"}).format(a.toJsDate(a.parseISO("1999-12-07"))).replace(/(07)|(٠٧)|(٢٩)|(۱۶)|(০৭)/,"dd").replace(/(12)|(١٢)|(٠٨)|(۰۹)|(১২)/,"mm").replace(/(1999)|(2542)|(١٩٩٩)|(١٤٢٠)|(۱۳۷۸)|(১৯৯৯)/,"yyyy").replace(/[^ymd\-/.]/g,"").replace(/\.$/,"");return P.canBeParsed(v)?v:"mm/dd/yyyy"}const u=L(()=>P.canBeParsed(e.inputFormat)?P.parse(e.inputFormat):P.parse(r()));function y(f){function v(o){const s=o.trim().split(u.value.separator);return{y:Number(s[u.value.order.indexOf("y")]),m:Number(s[u.value.order.indexOf("m")]),d:Number(s[u.value.order.indexOf("d")])}}function x(o){const{y:s,m,d:h}=o;return!s||!m||!h||m<1||m>12||h<1||h>31?null:{year:k(s),month:m,day:h}}function k(o){const s=a.getYear(a.date());if(o>100||s%100>=50)return o;const m=~~(s/100)*100;return o<50?m+o:m-100+o}const O=v(f),b=x(O);if(!b)return null;const{year:A,month:w,day:i}=b,d=o=>String(o).padStart(2,"0");return a.parseISO(`${A}-${d(w)}-${d(i)}`)}function l(f){return!!y(f)}function F(f){const v=a.toISO(f).split("T")[0].split("-");return u.value.order.split("").map(x=>v["ymd".indexOf(x)]).join(u.value.separator)}return{isValid:l,parseDate:y,formatDate:F,parserFormat:L(()=>u.value.format)}}const Ue=J({displayFormat:{type:[Function,String],default:void 0},location:{type:String,default:"bottom start"},menu:Boolean,updateOn:{type:Array,default:()=>["blur","enter"]},pickerProps:Object,...Se(),...Pe({mobile:null}),...Ve(),...ge({hideActions:!0}),...he({prependIcon:"$calendar"}),...$(De({hideHeader:!0,showAdjacentMonths:!0}),["location","rounded","height","minHeight","maxHeight"])},"VDateInput"),Re=ie()({name:"VDateInput",props:Ue(),emits:{save:e=>!0,cancel:()=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,n){let{emit:a,slots:r}=n;const{t:u,current:y}=de(),l=K(),{isValid:F,parseDate:f,formatDate:v,parserFormat:x}=Be(e,y),{mobile:k}=se(e),{InputIcon:O}=ce(e),{clampDate:b,isInAllowedRange:A}=fe(e),w=()=>e.multiple?[]:null,i=N(e,"modelValue",w(),t=>Array.isArray(t)?t.map(c=>l.toJsDate(c)):t&&l.toJsDate(t),t=>Array.isArray(t)?t.map(c=>l.date(c)):t&&l.date(t)),d=N(e,"menu"),o=T(!1),s=T(e.focused),m=W(),h=W(["save"]);function S(t){return typeof e.displayFormat=="function"?e.displayFormat(t):e.displayFormat?l.format(t,e.displayFormat??"keyboardDate"):v(t)}const z=C(()=>{const t=me(i.value);if(!t.length)return null;if(e.multiple===!0)return u("$vuetify.datePicker.itemsSelected",t.length);if(e.multiple==="range"){const c=t[0],g=t[t.length-1];return!l.isValid(c)||!l.isValid(g)?"":`${S(l.date(c))} - ${S(l.date(g))}`}return l.isValid(i.value)?S(l.date(i.value)):""}),G=C(()=>{if(k.value)return o.value?"text":"none"}),B=C(()=>!e.disabled&&!e.readonly),Q=C(()=>e.updateOn.length?!(k.value&&o.value)&&e.readonly:!0);pe(d,t=>{t||(o.value=!1,h.value=["save"])});function X(t){t.key==="Enter"&&((!d.value||!s.value)&&(d.value=!0),e.updateOn.includes("enter")&&!e.readonly&&_(t.target))}function M(t){t.preventDefault(),t.stopPropagation(),d.value&&k.value?o.value=!0:d.value=!0}function Z(){a("cancel"),d.value=!1,o.value=!1}function ee(t){a("save",t),d.value=!1}function te(t){t==null&&(i.value=w())}function ae(t){e.updateOn.includes("blur")&&!e.readonly&&_(t.target),k.value&&o.value&&!s.value&&(d.value=!1,o.value=!1)}function _(t){let{value:c}=t;if(!c.trim())i.value=w();else if(!e.multiple)F(c)&&(i.value=b(f(c)));else{const g=c.trim().split(/\D+-\D+|[^\d\-/.]+/);if(g.every(F))if(e.multiple==="range"){const[U,R]=g.map(f).map(b).toSorted((V,D)=>l.isAfter(V,D)?1:-1);i.value=ke(l,U,R)}else i.value=g.map(f).filter(A)}}return ye(()=>{const t=!!(e.prependIcon||r.prepend),c=Y.filterProps(e),g={...q.filterProps($(e,["active","bgColor","color","location","rounded","maxWidth","minWidth","width"])),...e.pickerProps},U=Fe(r,["title","header","day","month","year"]),R=H.filterProps($(e,["placeholder"]));return I(H,j({ref:m},R,{class:["v-date-input",e.class],style:e.style,modelValue:z.value,inputmode:G.value,placeholder:e.placeholder??x.value,readonly:Q.value,onKeydown:B.value?X:void 0,focused:d.value||s.value,onBlur:ae,validationValue:i.value,"onClick:control":B.value?M:void 0,"onUpdate:modelValue":te,"onUpdate:focused":V=>s.value=V}),{...r,default:()=>{var V;return xe(we,null,[I(be,{modelValue:d.value,"onUpdate:modelValue":D=>d.value=D,activator:"parent",minWidth:"0",eager:s.value,location:e.location,closeOnContentClick:!1,openOnClick:!1},{default:()=>[I(Y,j(c,{modelValue:i.value,"onUpdate:modelValue":D=>i.value=D,disabled:h.value,onSave:ee,onCancel:Z}),{default:D=>{let{actions:ne,model:E,save:re,cancel:le,isPristine:oe}=D;function ue(p){e.hideActions?(i.value=p,e.multiple||(d.value=!1)):E.value=p,a("save",p),h.value=[]}return I(q,j(g,{modelValue:e.hideActions?i.value:E.value,"onUpdate:modelValue":p=>ue(p),onMousedown:p=>p.preventDefault()}),{...U,actions:e.hideActions?void 0:()=>{var p;return((p=r.actions)==null?void 0:p.call(r,{save:re,cancel:le,isPristine:oe}))??ne()}})}})]}),(V=r.default)==null?void 0:V.call(r)])},prepend:t?V=>r.prepend?r.prepend(V):e.prependIcon&&I(O,{key:"prepend-icon",name:"prepend",tabindex:e["onClick:prepend"]?void 0:-1,onClick:B.value?M:void 0},null):void 0})}),ve({},m)}}),je={components:{VDateInput:Re},props:{modelValue:{type:[Array,Date,String,null]},config:{type:Object,default:()=>{}},assets:{type:Object,default:()=>{}},readonly:{type:Boolean,default:!1},context:{type:Object}},emits:["update:modelValue","error"],computed:{rules(){return[e=>!this.config.required||!!e||this.$gettext("Value is required")]}},watch:{modelValue:{immediate:!0,handler(e){this.$emit("error",!this.rules.every(n=>n(e??this.config.default??null)===!0))}}}};function $e(e,n,a,r,u,y){const l=Oe("v-date-input");return Ae(),Ce(l,{rules:y.rules,readonly:a.readonly,"allowed-dates":a.config.allowed,clearable:!a.readonly&&!a.config.required,max:a.config.max,min:a.config.min,multiple:a.config.multiple,placeholder:a.config.placeholder||null,modelValue:a.modelValue??a.config.default??null,"onUpdate:modelValue":n[0]||(n[0]=F=>e.$emit("update:modelValue",F)),density:"comfortable","hide-details":"auto",variant:"outlined","show-adjacent-months":""},null,8,["rules","readonly","allowed-dates","clearable","max","min","multiple","placeholder","modelValue"])}const _e=Ie(je,[["render",$e]]);export{_e as default};
