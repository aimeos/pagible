import{u as H,N as J,O as E,s as oe,P as ue,Q as ie,R as de,v as L,x as N,S as T,y as A,U as se,W as ce,z as me,X as fe,A as $,B as ye,C as ve,D as pe,Y as he,Z as ge,G as W,$ as Y,a0 as Ve,I as q,a as I,m as R,a1 as De,f as Pe,h as Fe,F as xe,_ as ke,b as be,r as we,o as Ce}from"./index-C-hnopMY.js";class D{constructor(n,a){this.order=n,this.separator=a}get format(){return this.order.split("").map(n=>`${n}${n}`).join(this.separator).replace("yy","yyyy")}static canBeParsed(n){if(typeof n!="string")return!1;const a=n.toLowerCase();return["y","m","d"].every(r=>a.includes(r))&&["/","-","."].some(r=>n.includes(r))}static parse(n){if(!D.canBeParsed(n))throw new Error(`[${n}] cannot be parsed into date format specification`);const a=n.toLowerCase().split("").filter((u,p,l)=>"dmy".includes(u)&&l.indexOf(u)===p).join(""),r=["/","-","."].find(u=>n.includes(u));return new D(a,r)}}const Oe=H({inputFormat:{type:String,validator:e=>!e||D.canBeParsed(e)}},"date-format");function Ae(e,n){const a=J();function r(){const m=n.value??"en-US",h=Intl.DateTimeFormat(m,{year:"numeric",month:"2-digit",day:"2-digit"}).format(a.toJsDate(a.parseISO("1999-12-07"))).replace(/(07)|(٠٧)|(٢٩)|(۱۶)|(০৭)/,"dd").replace(/(12)|(١٢)|(٠٨)|(۰۹)|(১২)/,"mm").replace(/(1999)|(2542)|(١٩٩٩)|(١٤٢٠)|(۱۳۷۸)|(১৯৯৯)/,"yyyy").replace(/[^ymd\-/.]/g,"").replace(/\.$/,"");return D.canBeParsed(h)?h:"mm/dd/yyyy"}const u=E(()=>D.canBeParsed(e.inputFormat)?D.parse(e.inputFormat):D.parse(r()));function p(m){function h(o){const c=o.trim().split(u.value.separator);return{y:Number(c[u.value.order.indexOf("y")]),m:Number(c[u.value.order.indexOf("m")]),d:Number(c[u.value.order.indexOf("d")])}}function b(o){const{y:c,m:f,d:g}=o;return!c||!f||!g||f<1||f>12||g<1||g>31?null:{year:x(c),month:f,day:g}}function x(o){const c=a.getYear(a.date());if(o>100||c%100>=50)return o;const f=~~(c/100)*100;return o<50?f+o:f-100+o}const C=h(m),O=b(C);if(!O)return null;const{year:w,month:i,day:d}=O,y=o=>String(o).padStart(2,"0");return a.parseISO(`${w}-${y(i)}-${y(d)}`)}function l(m){return!!p(m)}function F(m){const h=a.toISO(m).split("T")[0].split("-");return u.value.order.split("").map(b=>h["ymd".indexOf(b)]).join(u.value.separator)}return{isValid:l,parseDate:p,formatDate:F,parserFormat:E(()=>u.value.format)}}const Ie=H({displayFormat:{type:[Function,String],default:void 0},location:{type:String,default:"bottom start"},menu:Boolean,updateOn:{type:Array,default:()=>["blur","enter"]},...Oe(),...he({mobile:null}),...pe(),...ve({hideActions:!0}),...ye({prependIcon:"$calendar"}),...$(ge({hideHeader:!0,showAdjacentMonths:!0}),["location","rounded","height","minHeight","maxHeight"])},"VDateInput"),Se=oe()({name:"VDateInput",props:Ie(),emits:{save:e=>!0,cancel:()=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,n){let{emit:a,slots:r}=n;const{t:u,current:p}=ue(),l=J(),{isValid:F,parseDate:m,formatDate:h,parserFormat:b}=Ae(e,p),{mobile:x}=ie(e),{clampDate:C,isInAllowedRange:O}=de(e),w=()=>e.multiple?[]:null,i=L(e,"modelValue",w(),t=>Array.isArray(t)?t.map(s=>l.toJsDate(s)):t&&l.toJsDate(t),t=>Array.isArray(t)?t.map(s=>l.date(s)):t&&l.date(t)),d=L(e,"menu"),y=N(!1),o=N(e.focused),c=T(),f=T(["save"]);function g(t){return typeof e.displayFormat=="function"?e.displayFormat(t):e.displayFormat?l.format(t,e.displayFormat??"keyboardDate"):h(t)}const K=A(()=>{const t=se(i.value);if(!t.length)return null;if(e.multiple===!0)return u("$vuetify.datePicker.itemsSelected",t.length);if(e.multiple==="range"){const s=t[0],V=t[t.length-1];return!l.isValid(s)||!l.isValid(V)?"":`${g(l.date(s))} - ${g(l.date(V))}`}return l.isValid(i.value)?g(l.date(i.value)):""}),z=A(()=>{if(x.value)return y.value?"text":"none"}),S=A(()=>!e.disabled&&!e.readonly),G=A(()=>e.updateOn.length?!(x.value&&y.value)&&e.readonly:!0);ce(d,t=>{t||(y.value=!1,f.value=["save"])});function Q(t){t.key==="Enter"&&((!d.value||!o.value)&&(d.value=!0),e.updateOn.includes("enter")&&!e.readonly&&M(t.target))}function j(t){t.preventDefault(),t.stopPropagation(),d.value&&x.value?y.value=!0:d.value=!0}function X(){a("cancel"),d.value=!1,y.value=!1}function Z(t){a("save",t),d.value=!1}function ee(t){t==null&&(i.value=w())}function te(t){e.updateOn.includes("blur")&&!e.readonly&&M(t.target),x.value&&y.value&&!o.value&&(d.value=!1,y.value=!1)}function M(t){let{value:s}=t;if(!s.trim())i.value=w();else if(!e.multiple)F(s)&&(i.value=C(m(s)));else{const V=s.trim().split(/\D+-\D+|[^\d\-/.]+/);if(V.every(F))if(e.multiple==="range"){const[B,k]=V.map(m).map(C).toSorted((P,U)=>l.isAfter(P,U)?1:-1);i.value=De(l,B,k)}else i.value=V.map(m).filter(O)}}return me(()=>{const t=W.filterProps(e),s=Y.filterProps($(e,["active","bgColor","color","location","rounded","maxWidth","minWidth","width"])),V=Ve(r,["title","header","day","month","year"]),B=q.filterProps($(e,["placeholder"]));return I(q,R({ref:c},B,{class:e.class,style:e.style,modelValue:K.value,inputmode:z.value,placeholder:e.placeholder??b.value,readonly:G.value,onKeydown:S.value?Q:void 0,focused:d.value||o.value,onBlur:te,validationValue:i.value,"onClick:control":S.value?j:void 0,"onClick:prepend":S.value?j:void 0,"onUpdate:modelValue":ee,"onUpdate:focused":k=>o.value=k}),{...r,default:()=>{var k;return Pe(xe,null,[I(Fe,{modelValue:d.value,"onUpdate:modelValue":P=>d.value=P,activator:"parent",minWidth:"0",eager:o.value,location:e.location,closeOnContentClick:!1,openOnClick:!1},{default:()=>[I(W,R(t,{modelValue:i.value,"onUpdate:modelValue":P=>i.value=P,disabled:f.value,onSave:Z,onCancel:X}),{default:P=>{let{actions:U,model:_,save:ae,cancel:ne,isPristine:le}=P;function re(v){e.hideActions?(i.value=v,e.multiple||(d.value=!1)):_.value=v,a("save",v),f.value=[]}return I(Y,R(s,{modelValue:e.hideActions?i.value:_.value,"onUpdate:modelValue":v=>re(v),onMousedown:v=>v.preventDefault()}),{...V,actions:e.hideActions?void 0:()=>{var v;return((v=r.actions)==null?void 0:v.call(r,{save:ae,cancel:ne,isPristine:le}))??U()}})}})]}),(k=r.default)==null?void 0:k.call(r)])}})}),fe({},c)}}),Be={components:{VDateInput:Se},props:{modelValue:{type:[Array,Date,String,null]},config:{type:Object,default:()=>{}},assets:{type:Object,default:()=>{}},readonly:{type:Boolean,default:!1},context:{type:Object}},emits:["update:modelValue","error"],computed:{rules(){return[e=>!this.config.required||!!e||this.$gettext("Value is required")]}},watch:{modelValue:{immediate:!0,handler(e){this.$emit("error",!this.rules.every(n=>n(e??this.config.default??null)===!0))}}}};function Ue(e,n,a,r,u,p){const l=we("v-date-input");return Ce(),be(l,{rules:p.rules,readonly:a.readonly,"allowed-dates":a.config.allowed,clearable:!a.readonly&&!a.config.required,max:a.config.max,min:a.config.min,multiple:a.config.multiple,placeholder:a.config.placeholder||null,modelValue:a.modelValue??a.config.default??null,"onUpdate:modelValue":n[0]||(n[0]=F=>e.$emit("update:modelValue",F)),density:"comfortable","hide-details":"auto",variant:"outlined","show-adjacent-months":""},null,8,["rules","readonly","allowed-dates","clearable","max","min","multiple","placeholder","modelValue"])}const $e=ke(Be,[["render",Ue]]);export{$e as default};
