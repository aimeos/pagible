import{s as $,u as j,v as L,x as P,y as h,z as M,A as b,B as W,C as H,D as q,E as D,G as y,H as C,I as g,f as k,a as s,J as K,F as x,m as v,h as N,_ as R,b as T,r as z,o as G}from"./index-8Ib2nsHy.js";const J=["prepend","prepend-inner","append","append-inner"],Q=j({hidePip:Boolean,colorPip:Boolean,pipIcon:{type:String,default:"$color"},pipLocation:{type:String,default:"prepend",validator:e=>J.includes(e)},pipVariant:{type:String,default:"text"},pickerProps:Object,...q(),...H(),...W(),...b(D(),["location","height","minHeight","maxHeight"])},"VColorInput"),X=$()({name:"VColorInput",props:Q(),emits:{"update:modelValue":e=>!0},setup(e,d){let{slots:a}=d;const t=L(e,"modelValue"),o=P(!1),c=P(e.focused),r=h(()=>!e.disabled&&!e.readonly),p=h(()=>t.value||null);function _(i){if(i.key!=="Enter")return;if(!o.value||!c.value){o.value=!0;return}const m=i.target;t.value=m.value}function f(i){i.preventDefault(),i.stopPropagation(),o.value=!0}function I(){o.value=!1}function F(){o.value=!1}M(()=>{const i=y.filterProps(e),m={...C.filterProps(b(e,["active","bgColor","color","rounded","maxWidth","minWidth","width"])),...e.pickerProps},B=g.filterProps(e),U=e.hidePip?void 0:{[e.pipLocation]:l=>{var n;return k(x,null,[s(K,{class:"v-color-input__pip",color:e.colorPip?t.value:void 0,variant:e.pipVariant,icon:e.pipIcon},null),(n=a[e.pipLocation])==null?void 0:n.call(a,l)])}};return s(g,v(B,{class:["v-color-input",e.class],style:e.style,modelValue:p.value,onKeydown:r.value?_:void 0,focused:o.value||c.value,"onClick:control":r.value?f:void 0,"onClick:prependInner":r.value?f:void 0,"onUpdate:focused":l=>c.value=l,"onClick:appendInner":r.value?f:void 0,"onUpdate:modelValue":l=>{t.value=l}}),{...a,...U,default:()=>{var l;return k(x,null,[s(N,{modelValue:o.value,"onUpdate:modelValue":n=>o.value=n,activator:"parent",minWidth:"0",closeOnContentClick:!1,openOnClick:!1},{default:()=>[s(y,v(i,{modelValue:t.value,"onUpdate:modelValue":n=>t.value=n,onSave:I,onCancel:F}),{default:n=>{let{actions:A,model:V,save:O,cancel:S,isPristine:w}=n;function E(u){e.hideActions?t.value=u:V.value=u}return s(C,v(m,{modelValue:e.hideActions?t.value:V.value,"onUpdate:modelValue":u=>E(u)}),{actions:e.hideActions?void 0:()=>{var u;return((u=a.actions)==null?void 0:u.call(a,{save:O,cancel:S,isPristine:w}))??A()}})}})]}),(l=a.default)==null?void 0:l.call(a)])}})})}}),Y={components:{VColorInput:X},props:{modelValue:{type:String},config:{type:Object,default:()=>{}},assets:{type:Object,default:()=>{}},readonly:{type:Boolean,default:!1},context:{type:Object}},emits:["update:modelValue","error"],computed:{rules(){return[e=>!this.config.required||!!e||this.$gettext("Value is required"),e=>!e||/^#[0-9A-F]{6,8}$/i.test(e)||this.$gettext("Value must be a hex color code")]}},watch:{modelValue:{immediate:!0,handler(e){this.$emit("error",!this.rules.every(d=>d(e??this.config.default??"")===!0))}}}};function Z(e,d,a,t,o,c){const r=z("v-color-input");return G(),T(r,{rules:c.rules,clearable:!a.readonly,disabled:a.readonly,modelValue:a.modelValue??a.config.default??"","onUpdate:modelValue":d[0]||(d[0]=p=>e.$emit("update:modelValue",p))},null,8,["rules","clearable","disabled","modelValue"])}const ae=R(Y,[["render",Z]]);export{ae as default};
