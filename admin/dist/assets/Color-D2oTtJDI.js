import{s as $,u as L,v as M,x as P,y,z as j,A as _,B as q,C as D,D as K,E as N,G as C,H as h,I as k,f as g,a as s,J as R,F as x,m as v,h as T,_ as W,b as z,o as G,r as H}from"./index-qpWCrkU6.js";const J=["prepend","prepend-inner","append","append-inner"],Q=L({hidePip:Boolean,colorPip:Boolean,pipIcon:{type:String,default:"$color"},pipLocation:{type:String,default:"prepend",validator:e=>J.includes(e)},pipVariant:{type:String,default:"text"},...K(),...D(),...q(),..._(N(),["width"])},"VColorInput"),X=$()({name:"VColorInput",props:Q(),emits:{"update:modelValue":e=>!0},setup(e,d){let{slots:a}=d;const t=M(e,"modelValue"),o=P(!1),c=P(e.focused),r=y(()=>!e.disabled&&!e.readonly),p=y(()=>t.value||null);function b(i){if(i.key!=="Enter")return;if(!o.value||!c.value){o.value=!0;return}const m=i.target;t.value=m.value}function f(i){i.preventDefault(),i.stopPropagation(),o.value=!0}function I(){o.value=!1}function F(){o.value=!1}j(()=>{const i=C.filterProps(e),m=h.filterProps(_(e,["active","color"])),B=k.filterProps(e),U=e.hidePip?void 0:{[e.pipLocation]:l=>{var n;return g(x,null,[s(R,{class:"v-color-input__pip",color:e.colorPip?t.value:void 0,variant:e.pipVariant,icon:e.pipIcon},null),(n=a[e.pipLocation])==null?void 0:n.call(a,l)])}};return s(k,v(B,{class:["v-color-input",e.class],style:e.style,modelValue:p.value,onKeydown:r.value?b:void 0,focused:o.value||c.value,"onClick:control":r.value?f:void 0,"onClick:prependInner":r.value?f:void 0,"onUpdate:focused":l=>c.value=l,"onClick:appendInner":r.value?f:void 0,"onUpdate:modelValue":l=>{t.value=l}}),{...a,...U,default:()=>{var l;return g(x,null,[s(T,{modelValue:o.value,"onUpdate:modelValue":n=>o.value=n,activator:"parent",minWidth:"0",closeOnContentClick:!1,openOnClick:!1},{default:()=>[s(C,v(i,{modelValue:t.value,"onUpdate:modelValue":n=>t.value=n,onSave:I,onCancel:F}),{default:n=>{let{actions:A,model:V,save:S,cancel:w,isPristine:E}=n;function O(u){e.hideActions?t.value=u:V.value=u}return s(h,v(m,{modelValue:e.hideActions?t.value:V.value,"onUpdate:modelValue":u=>O(u)}),{actions:e.hideActions?void 0:()=>{var u;return((u=a.actions)==null?void 0:u.call(a,{save:S,cancel:w,isPristine:E}))??A()}})}})]}),(l=a.default)==null?void 0:l.call(a)])}})})}}),Y={components:{VColorInput:X},props:{modelValue:{type:String},config:{type:Object,default:()=>{}},assets:{type:Object,default:()=>{}},readonly:{type:Boolean,default:!1},context:{type:Object}},emits:["update:modelValue","error"],computed:{rules(){return[e=>!this.config.required||!!e||this.$gettext("Value is required"),e=>!e||/^#[0-9A-F]{6,8}$/i.test(e)||this.$gettext("Value must be a hex color code")]}},watch:{modelValue:{immediate:!0,handler(e){this.$emit("error",!this.rules.every(d=>d(e??this.config.default??"")===!0))}}}};function Z(e,d,a,t,o,c){const r=H("v-color-input");return G(),z(r,{rules:c.rules,clearable:!a.readonly,disabled:a.readonly,modelValue:a.modelValue??a.config.default??"","onUpdate:modelValue":d[0]||(d[0]=p=>e.$emit("update:modelValue",p))},null,8,["rules","clearable","disabled","modelValue"])}const ae=W(Y,[["render",Z]]);export{ae as default};
