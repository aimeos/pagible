import{s as O,u as L,v as M,x as P,y,z as j,A as _,B as q,C as D,D as K,E as N,G as C,H as h,I as k,f as g,a as c,J as R,F as x,m as v,h as T,_ as W,b as z,o as G,r as H}from"./index-Dw2ft2R6.js";const J=["prepend","prepend-inner","append","append-inner"],Q=L({hidePip:Boolean,colorPip:Boolean,pipIcon:{type:String,default:"$color"},pipLocation:{type:String,default:"prepend",validator:e=>J.includes(e)},pipVariant:{type:String,default:"text"},...K(),...D(),...q(),..._(N(),["width"])},"VColorInput"),X=O()({name:"VColorInput",props:Q(),emits:{"update:modelValue":e=>!0},setup(e,d){let{slots:a}=d;const l=M(e,"modelValue"),o=P(!1),s=P(e.focused),r=y(()=>!e.disabled&&!e.readonly),p=y(()=>l.value||null);function b(u){if(u.key!=="Enter")return;if(!o.value||!s.value){o.value=!0;return}const m=u.target;l.value=m.value}function f(u){u.preventDefault(),u.stopPropagation(),o.value=!0}function I(){o.value=!1}function F(){o.value=!1}j(()=>{const u=C.filterProps(e),m=h.filterProps(_(e,["active","color"])),B=k.filterProps(e),U=e.hidePip?void 0:{[e.pipLocation]:t=>{var n;return g(x,null,[c(R,{class:"v-color-input__pip",color:e.colorPip?l.value:void 0,variant:e.pipVariant,icon:e.pipIcon},null),(n=a[e.pipLocation])==null?void 0:n.call(a,t)])}};return c(k,v(B,{class:["v-color-input",e.class],style:e.style,modelValue:p.value,onKeydown:r.value?b:void 0,focused:o.value||s.value,"onClick:control":r.value?f:void 0,"onClick:prependInner":r.value?f:void 0,"onUpdate:focused":t=>s.value=t,"onClick:appendInner":r.value?f:void 0,"onUpdate:modelValue":t=>{l.value=t}}),{...a,...U,default:()=>{var t;return g(x,null,[c(T,{modelValue:o.value,"onUpdate:modelValue":n=>o.value=n,activator:"parent",minWidth:"0",closeOnContentClick:!1,openOnClick:!1},{default:()=>[c(C,v(u,{modelValue:l.value,"onUpdate:modelValue":n=>l.value=n,onSave:I,onCancel:F}),{default:n=>{let{actions:A,model:V,save:S,cancel:$,isPristine:w}=n;function E(i){e.hideActions?l.value=i:V.value=i}return c(h,v(m,{modelValue:e.hideActions?l.value:V.value,"onUpdate:modelValue":i=>E(i)}),{actions:e.hideActions?void 0:()=>{var i;return((i=a.actions)==null?void 0:i.call(a,{save:S,cancel:$,isPristine:w}))??A()}})}})]}),(t=a.default)==null?void 0:t.call(a)])}})})}}),Y={components:{VColorInput:X},props:{modelValue:{type:String,default:""},config:{type:Object,default:()=>{}},assets:{type:Object,default:()=>{}},readonly:{type:Boolean,default:!1},context:{type:Object}},emits:["update:modelValue","error"],computed:{rules(){return[e=>!this.config.required||!!e||this.$gettext("Value is required"),e=>!e||/^#[0-9A-F]{6,8}$/i.test(e)||this.$gettext("Value must be a hex color code")]}},watch:{modelValue:{immediate:!0,handler(e){this.$emit("error",!this.rules.every(d=>d(this.modelValue)===!0))}}}};function Z(e,d,a,l,o,s){const r=H("v-color-input");return G(),z(r,{rules:s.rules,clearable:!a.readonly,disabled:a.readonly,modelValue:a.modelValue,"onUpdate:modelValue":d[0]||(d[0]=p=>e.$emit("update:modelValue",p))},null,8,["rules","clearable","disabled","modelValue"])}const ae=W(Y,[["render",Z]]);export{ae as default};
