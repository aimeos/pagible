var te=Object.defineProperty;var ne=(a,t,e)=>t in a?te(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var b=(a,t,e)=>ne(a,typeof t!="symbol"?t+"":t,e);import{P as p,E as oe,D as ie,B as q,M as _,q as se,C as B,f as v,S as ae,U as ce,a as re,c as U,b as P,d as $,e as W,g as z,h as j,i as K,j as G,k as le,l as J,p as de,m as L,n as ue,s as me,o as ge,r as V,t as fe,_ as he,u as pe,v as be,w as ke,x as ve,y as Be,z as Ee,A as we,F as Ce,G as Se,H as _e,I as xe,J as ye,K as Ae,L as Pe,N as Le,O as Ve,Q as Te,R as De,T as Oe,V as Ie,W as Re,X as Me,Y as Fe,Z as He,$ as Ne,a0 as Qe,a1 as qe,a2 as Ue,a3 as $e,a4 as We,a5 as ze,a6 as je,a7 as Ke,a8 as Ge,a9 as Je,aa as Ye,ab as Xe,ac as Ze,ad as et,ae as tt,af as nt,ag as ot,ah as it,ai as st,aj as at,ak as ct,al as rt}from"./ckeditor5--KTCzYzw.js";import{_ as lt,ak as dt,c as T,a as ut,g as mt,al as gt,r as ft,o as D}from"./index-DBEQ109X.js";/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ht extends B{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const e=this.editor.model,n=e.schema,s=e.document.selection,i=Array.from(s.getSelectedBlocks()),o=t.forceValue===void 0?!this.value:t.forceValue;e.change(c=>{if(!o)this._removeQuote(c,i.filter(E));else{const r=i.filter(l=>E(l)||I(n,l));this._applyQuote(c,r)}})}_getValue(){const t=this.editor.model.document.selection,e=v(t.getSelectedBlocks());return!!(e&&E(e))}_checkEnabled(){if(this.value)return!0;const t=this.editor.model.document.selection,e=this.editor.model.schema,n=v(t.getSelectedBlocks());return n?I(e,n):!1}_removeQuote(t,e){O(t,e).reverse().forEach(n=>{if(n.start.isAtStart&&n.end.isAtEnd){t.unwrap(n.start.parent);return}if(n.start.isAtStart){const i=t.createPositionBefore(n.start.parent);t.move(n,i);return}n.end.isAtEnd||t.split(n.end);const s=t.createPositionAfter(n.end.parent);t.move(n,s)})}_applyQuote(t,e){const n=[];O(t,e).reverse().forEach(s=>{let i=E(s.start);i||(i=t.createElement("blockQuote"),t.wrap(s,i)),n.push(i)}),n.reverse().reduce((s,i)=>s.nextSibling==i?(t.merge(t.createPositionAfter(s)),s):i)}}function E(a){return a.parent.name=="blockQuote"?a.parent:null}function O(a,t){let e,n=0;const s=[];for(;n<t.length;){const i=t[n],o=t[n+1];e||(e=a.createPositionBefore(i)),(!o||i.nextSibling!=o)&&(s.push(a.createRange(e,a.createPositionAfter(i))),e=null),n++}return s}function I(a,t){const e=a.checkChild(t.parent,"blockQuote"),n=a.checkChild(["$root","blockQuote"],t);return e&&n}class pt extends p{static get pluginName(){return"BlockQuoteEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[oe,ie]}init(){const t=this.editor,e=t.model.schema;t.commands.add("blockQuote",new ht(t)),e.register("blockQuote",{inheritAllFrom:"$container"}),t.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),t.model.document.registerPostFixer(o=>{const c=t.model.document.differ.getChanges();for(const r of c)if(r.type=="insert"){const l=r.position.nodeAfter;if(!l)continue;if(l.is("element","blockQuote")&&l.isEmpty)return o.remove(l),!0;if(l.is("element","blockQuote")&&!e.checkChild(r.position,l))return o.unwrap(l),!0;if(l.is("element")){const u=o.createRangeIn(l);for(const d of u.getItems())if(d.is("element","blockQuote")&&!e.checkChild(o.createPositionBefore(d),d))return o.unwrap(d),!0}}else if(r.type=="remove"){const l=r.position.parent;if(l.is("element","blockQuote")&&l.isEmpty)return o.remove(l),!0}return!1});const n=this.editor.editing.view.document,s=t.model.document.selection,i=t.commands.get("blockQuote");this.listenTo(n,"enter",(o,c)=>{if(!s.isCollapsed||!i.value)return;s.getLastPosition().parent.isEmpty&&(t.execute("blockQuote"),t.editing.view.scrollToTheSelection(),c.preventDefault(),o.stop())},{context:"blockquote"}),this.listenTo(n,"delete",(o,c)=>{if(c.direction!="backward"||!s.isCollapsed||!i.value)return;const r=s.getLastPosition().parent;r.isEmpty&&!r.previousSibling&&(t.execute("blockQuote"),t.editing.view.scrollToTheSelection(),c.preventDefault(),o.stop())},{context:"blockquote"})}}class bt extends p{static get pluginName(){return"BlockQuoteUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("blockQuote",()=>{const e=this._createButton(q);return e.set({tooltip:!0}),e}),t.ui.componentFactory.add("menuBar:blockQuote",()=>{const e=this._createButton(_);return e.set({role:"menuitemcheckbox"}),e})}_createButton(t){const e=this.editor,n=e.locale,s=e.commands.get("blockQuote"),i=new t(e.locale),o=n.t;return i.set({label:o("Block quote"),icon:se,isToggleable:!0}),i.bind("isEnabled").to(s,"isEnabled"),i.bind("isOn").to(s,"value"),this.listenTo(i,"execute",()=>{e.execute("blockQuote"),e.editing.view.focus()}),i}}class kt extends p{static get requires(){return[pt,bt]}static get pluginName(){return"BlockQuote"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function C(a){const t=a.t,e=a.config.get("codeBlock.languages");for(const n of e)n.label==="Plain text"&&(n.label=t("Plain text")),n.class===void 0&&(n.class=`language-${n.language}`);return e}function S(a,t,e){const n={};for(const s of a)if(t==="class"){const i=s[t].split(" ").shift();n[i]=s[e]}else n[s[t]]=s[e];return n}function A(a){return a.data.match(/^(\s*)/)[0]}function vt(a,t){const e=a.createDocumentFragment(),n=t.split(`
`),s=n.reduce((i,o,c)=>(i.push(o),c<n.length-1&&i.push(a.createElement("br")),i),[]);return a.appendChild(s,e),e}function y(a){const t=a.document.selection,e=[];if(t.isCollapsed)return[t.anchor];const n=t.getFirstRange().getWalker({ignoreElementEnd:!0,direction:"backward"});for(const{item:s}of n){let i=s.is("$textProxy")?s.textNode:s;const o=i.parent;if(!o.is("element","codeBlock")||i.is("element","softBreak"))continue;for(;i.previousSibling&&!i.previousSibling.is("element","softBreak");)i=i.previousSibling;const c=i.is("$text")?i.startOffset+A(i).length:i.startOffset,r=a.createPositionAt(o,c);e.every(l=>!l.isEqual(r))&&e.push(r)}return e}function Y(a){const t=v(a.getSelectedBlocks());return!!t&&t.is("element","codeBlock")}function R(a,t){return t.is("rootElement")||a.isLimit(t)?!1:a.checkChild(t.parent,"codeBlock")}function M(a,t,e,n){const s=S(t,"language","label"),i=e.getAttribute("language");if(i in s){const o=s[i];return a(n==="enter"?"Entering %0 code snippet":"Leaving %0 code snippet",o)}return a(n==="enter"?"Entering code snippet":"Leaving code snippet")}function X(a,t){for(a.textNode&&(a=t.createPositionBefore(a.textNode));a.nodeBefore&&!a.nodeBefore.is("element","softBreak");)a=t.createPositionBefore(a.nodeBefore);const e=a.nodeAfter;return e&&e.is("$text")?e:null}class Bt extends B{constructor(e){super(e);b(this,"_lastLanguage");this._lastLanguage=null}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const n=this.editor,s=n.model,i=s.document.selection,c=C(n)[0],r=Array.from(i.getSelectedBlocks()),l=e.forceValue==null?!this.value:e.forceValue,u=Et(e,this._lastLanguage,c.language);s.change(d=>{l?this._applyCodeBlock(d,r,u):this._removeCodeBlock(d,r)})}_getValue(){const e=this.editor.model.document.selection,n=v(e.getSelectedBlocks());return!!(n!=null&&n.is("element","codeBlock"))?n.getAttribute("language"):!1}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,n=this.editor.model.schema,s=v(e.getSelectedBlocks());return s?R(n,s):!1}_applyCodeBlock(e,n,s){this._lastLanguage=s;const i=this.editor.model.schema,o=n.filter(c=>R(i,c));for(const c of o)e.rename(c,"codeBlock"),e.setAttribute("language",s,c),i.removeDisallowedAttributes([c],e),Array.from(c.getChildren()).filter(r=>!i.checkChild(c,r)).forEach(r=>e.remove(r));o.reverse().forEach((c,r)=>{const l=o[r+1];c.previousSibling===l&&(e.appendElement("softBreak",l),e.merge(e.createPositionBefore(c)))})}_removeCodeBlock(e,n){const s=n.filter(i=>i.is("element","codeBlock"));for(const i of s){const o=e.createRangeOn(i);for(const c of Array.from(o.getItems()).reverse())if(c.is("element","softBreak")&&c.parent.is("element","codeBlock")){const{position:r}=e.split(e.createPositionBefore(c)),l=r.nodeAfter;e.rename(l,"paragraph"),e.removeAttribute("language",l),e.remove(c)}e.rename(i,"paragraph"),e.removeAttribute("language",i)}}}function Et(a,t,e){return a.language?a.language:a.usePreviousLanguageChoice&&t?t:e}class wt extends B{constructor(e){super(e);b(this,"_indentSequence");this._indentSequence=e.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const n=this.editor.model;n.change(s=>{const i=y(n);for(const o of i){const c=s.createText(this._indentSequence);n.insertContent(c,o)}})}_checkEnabled(){return this._indentSequence?Y(this.editor.model.document.selection):!1}}class Ct extends B{constructor(e){super(e);b(this,"_indentSequence");this._indentSequence=e.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const n=this.editor.model;n.change(()=>{const s=y(n);for(const i of s){const o=F(n,i,this._indentSequence);o&&n.deleteContent(n.createSelection(o))}})}_checkEnabled(){if(!this._indentSequence)return!1;const e=this.editor.model;return Y(e.document.selection)?y(e).some(n=>F(e,n,this._indentSequence)):!1}}function F(a,t,e){const n=X(t,a);if(!n)return null;const s=A(n),i=s.lastIndexOf(e);if(i+e.length!==s.length||i===-1)return null;const{parent:o,startOffset:c}=n;return a.createRange(a.createPositionAt(o,c+i),a.createPositionAt(o,c+i+e.length))}function H(a,t,e=!1){const n=S(t,"language","class"),s=S(t,"language","label");return(i,o,c)=>{const{writer:r,mapper:l,consumable:u}=c;if(!u.consume(o.item,"insert"))return;const d=o.item.getAttribute("language"),m=l.toViewPosition(a.createPositionBefore(o.item)),g={};e&&(g["data-language"]=s[d],g.spellcheck="false");const f=n[d]?{class:n[d]}:void 0,h=r.createContainerElement("code",f),ee=r.createContainerElement("pre",g,h);r.insert(m,ee),l.bindElements(o.item,h)}}function St(a){return(t,e,n)=>{if(e.item.parent.name!=="codeBlock")return;const{writer:s,mapper:i,consumable:o}=n;if(!o.consume(e.item,"insert"))return;const c=i.toViewPosition(a.createPositionBefore(e.item));s.insert(c,s.createText(`
`))}}function _t(a,t){const e=S(t,"class","language"),n=t[0].language;return(s,i,o)=>{const c=i.viewItem,r=c.parent;if(!r||!r.is("element","pre")||i.modelCursor.findAncestor("codeBlock"))return;const{consumable:l,writer:u}=o;if(!l.test(c,{name:!0}))return;const d=u.createElement("codeBlock"),m=[...c.getClassNames()];m.length||m.push("");for(const g of m){const f=e[g];if(f){u.setAttribute("language",f,d);break}}d.hasAttribute("language")||u.setAttribute("language",n,d),o.convertChildren(c,d),o.safeInsert(d,i.modelCursor)&&(l.consume(c,{name:!0}),o.updateConversionResult(d,i))}}function xt(){return(a,t,{consumable:e,writer:n})=>{let s=t.modelCursor;if(!e.test(t.viewItem)||!s.findAncestor("codeBlock"))return;e.consume(t.viewItem);const o=t.viewItem.data.split(`
`).map(r=>n.createText(r)),c=o[o.length-1];for(const r of o)if(n.insert(r,s),s=s.getShiftedBy(r.offsetSize),r!==c){const l=n.createElement("softBreak");n.insert(l,s),s=n.createPositionAfter(l)}t.modelRange=n.createRange(t.modelCursor,s),t.modelCursor=s}}function yt(){return(a,t,{consumable:e})=>{const n=t.viewItem;if(n.findAncestor("pre"))return;const s=Array.from(n.getChildren()),i=s.find(o=>o.is("element","code"));if(i)for(const o of s)o===i||!o.is("$text")||e.consume(o,{name:!0})}}const Z="paragraph";class At extends p{static get pluginName(){return"CodeBlockEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[ae]}constructor(t){super(t),t.config.define("codeBlock",{languages:[{language:"plaintext",label:"Plain text"},{language:"c",label:"C"},{language:"cs",label:"C#"},{language:"cpp",label:"C++"},{language:"css",label:"CSS"},{language:"diff",label:"Diff"},{language:"go",label:"Go"},{language:"html",label:"HTML"},{language:"java",label:"Java"},{language:"javascript",label:"JavaScript"},{language:"php",label:"PHP"},{language:"python",label:"Python"},{language:"ruby",label:"Ruby"},{language:"typescript",label:"TypeScript"},{language:"xml",label:"XML"}],indentSequence:"	"})}init(){const t=this.editor,e=t.model.schema,n=t.model,s=t.editing.view,i=C(t);t.commands.add("codeBlock",new Bt(t)),t.commands.add("indentCodeBlock",new wt(t)),t.commands.add("outdentCodeBlock",new Ct(t)),this.listenTo(s.document,"tab",(o,c)=>{const r=c.shiftKey?"outdentCodeBlock":"indentCodeBlock";t.commands.get(r).isEnabled&&(t.execute(r),c.stopPropagation(),c.preventDefault(),o.stop())},{context:"pre"}),e.register("codeBlock",{allowWhere:"$block",allowChildren:"$text",disallowChildren:"$inlineObject",allowAttributes:["language"],allowAttributesOf:"$listItem",isBlock:!0}),e.addAttributeCheck((o,c)=>{const r=o.getItem(o.length-2);if(e.getAttributeProperties(c).isFormatting&&r&&r.name=="codeBlock")return!1}),t.editing.downcastDispatcher.on("insert:codeBlock",H(n,i,!0)),t.data.downcastDispatcher.on("insert:codeBlock",H(n,i)),t.data.downcastDispatcher.on("insert:softBreak",St(n),{priority:"high"}),t.data.upcastDispatcher.on("element:code",_t(s,i)),t.data.upcastDispatcher.on("text",xt()),t.data.upcastDispatcher.on("element:pre",yt(),{priority:"high"}),this.listenTo(t.editing.view.document,"clipboardInput",(o,c)=>{let r=n.createRange(n.document.selection.anchor);if(c.targetRanges&&(r=t.editing.mapper.toModelRange(c.targetRanges[0])),!r.start.parent.is("element","codeBlock"))return;const l=c.dataTransfer.getData("text/plain"),u=new ce(t.editing.view.document);c.content=vt(u,l)}),t.plugins.has("ClipboardPipeline")&&t.plugins.get(re).on("contentInsertion",(o,c)=>{const r=t.model,l=r.document.selection;l.anchor.parent.is("element","codeBlock")&&r.change(u=>{const d=u.createRangeIn(c.content);for(const m of[...d.getItems()])m.is("node")&&!e.checkChild(l.anchor,m)&&u.remove(m)})}),this.listenTo(n,"getSelectedContent",(o,[c])=>{const r=c.anchor;c.isCollapsed||!r.parent.is("element","codeBlock")||!r.hasSameParentAs(c.focus)||n.change(l=>{const u=o.return;if(r.parent.is("element")&&(u.childCount>1||c.containsEntireContent(r.parent))){const m=l.createElement("codeBlock",r.parent.getAttributes());l.append(u,m);const g=l.createDocumentFragment();l.append(m,g),o.return=g;return}const d=u.getChild(0);e.checkAttribute(d,"code")&&l.setAttribute("code",!0,d)})})}afterInit(){const t=this.editor,e=t.commands,n=e.get("indent"),s=e.get("outdent");n&&n.registerChildCommand(e.get("indentCodeBlock"),{priority:"highest"}),s&&s.registerChildCommand(e.get("outdentCodeBlock")),this.listenTo(t.editing.view.document,"enter",(i,o)=>{t.model.document.selection.getLastPosition().parent.is("element","codeBlock")&&(!Lt(t,o.isSoft)&&!Vt(t,o.isSoft)&&Pt(t),o.preventDefault(),i.stop())},{context:"pre"}),this._initAriaAnnouncements()}_initAriaAnnouncements(){const{model:t,ui:e,t:n}=this.editor,s=C(this.editor);let i=null;t.document.selection.on("change:range",()=>{const o=t.document.selection.focus.parent;!e||i===o||!o.is("element")||(i&&i.is("element","codeBlock")&&e.ariaLiveAnnouncer.announce(M(n,s,i,"leave")),o.is("element","codeBlock")&&e.ariaLiveAnnouncer.announce(M(n,s,o,"enter")),i=o)})}}function Pt(a){const t=a.model,e=t.document,n=e.selection.getLastPosition();let s;const i=X(n,t);i&&i.is("$text")&&(s=A(i)),a.model.change(o=>{a.execute("shiftEnter"),s&&o.insertText(s,e.selection.anchor)})}function Lt(a,t){const n=a.model.document,s=a.editing.view,i=n.selection.getLastPosition(),o=i.nodeAfter;return t||!n.selection.isCollapsed||!i.isAtStart||!k(o)?!1:(a.model.change(c=>{a.execute("enter");const r=n.selection.anchor.parent.previousSibling;c.rename(r,Z),c.setSelection(r,"in"),a.model.schema.removeDisallowedAttributes([r],c),c.remove(o)}),s.scrollToTheSelection(),!0)}function Vt(a,t){const e=a.model,n=e.document,s=a.editing.view,i=n.selection.getLastPosition(),o=i.nodeBefore;let c;if(t||!n.selection.isCollapsed||!i.isAtEnd||!o||!o.previousSibling)return!1;if(k(o)&&k(o.previousSibling))c=e.createRange(e.createPositionBefore(o.previousSibling),e.createPositionAfter(o));else if(x(o)&&k(o.previousSibling)&&k(o.previousSibling.previousSibling))c=e.createRange(e.createPositionBefore(o.previousSibling.previousSibling),e.createPositionAfter(o));else if(x(o)&&k(o.previousSibling)&&x(o.previousSibling.previousSibling)&&o.previousSibling.previousSibling&&k(o.previousSibling.previousSibling.previousSibling))c=e.createRange(e.createPositionBefore(o.previousSibling.previousSibling.previousSibling),e.createPositionAfter(o));else return!1;return a.model.change(r=>{r.remove(c),a.execute("enter");const l=n.selection.anchor.parent;r.rename(l,Z),a.model.schema.removeDisallowedAttributes([l],r)}),s.scrollToTheSelection(),!0}function x(a){return a&&a.is("$text")&&!a.data.match(/\S/)}function k(a){return a&&a.is("element","softBreak")}class Tt extends p{static get pluginName(){return"CodeBlockUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=t.ui.componentFactory,s=C(t),i=this._getLanguageListItemDefinitions(s),o=t.commands.get("codeBlock");n.add("codeBlock",c=>{const r=U(c,le),l=r.buttonView,u=e("Insert code block");return l.set({label:u,tooltip:!0,icon:P,isToggleable:!0}),l.bind("isOn").to(o,"value",d=>!!d),l.on("execute",()=>{t.execute("codeBlock",{usePreviousLanguageChoice:!0}),t.editing.view.focus()}),r.on("execute",d=>{t.execute("codeBlock",{language:d.source._codeBlockLanguage,forceValue:!0}),t.editing.view.focus()}),r.class="ck-code-block-dropdown",r.bind("isEnabled").to(o),$(r,i,{role:"menu",ariaLabel:u}),r}),n.add("menuBar:codeBlock",c=>{const r=new W(c);r.buttonView.set({role:"menuitem",label:e("Code block"),icon:P}),r.bind("isEnabled").to(o);const l=new z(c);l.set({ariaLabel:e("Insert code block")});for(const u of i){const d=new j(c,r),m=new _(c);m.bind(...Object.keys(u.model)).to(u.model),m.set({isToggleable:!0,role:"menuitemcheckbox"}),m.delegate("execute").to(r),m.on("execute",()=>{t.execute("codeBlock",{language:u.model._codeBlockLanguage,forceValue:o.value!=u.model._codeBlockLanguage}),t.editing.view.focus()}),d.children.add(m),l.items.add(d)}return r.panelView.children.add(l),r})}_getLanguageListItemDefinitions(t){const n=this.editor.commands.get("codeBlock"),s=new K;for(const i of t){const o={type:"button",model:new G({_codeBlockLanguage:i.language,label:i.label,role:"menuitemradio",withText:!0})};o.model.bind("isOn").to(n,"value",c=>c===o.model._codeBlockLanguage),s.add(o)}return s}}class Dt extends p{static get requires(){return[At,Tt]}static get pluginName(){return"CodeBlock"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Ot extends B{constructor(e,n){super(e);b(this,"modelElements");this.modelElements=n}refresh(){const e=v(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(n=>N(e,n,this.editor.model.schema))}execute(e){const n=this.editor.model,s=n.document,i=e.value;n.change(o=>{const c=Array.from(s.selection.getSelectedBlocks()).filter(r=>N(r,i,n.schema));for(const r of c)r.is("element",i)||o.rename(r,i)})}}function N(a,t,e){return e.checkChild(a.parent,t)&&!e.isObject(a)}const Q="paragraph";class It extends p{static get pluginName(){return"HeadingEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[J]}init(){const t=this.editor,e=t.config.get("heading.options"),n=[];for(const s of e)s.model!=="paragraph"&&(t.model.schema.register(s.model,{inheritAllFrom:"$block"}),t.conversion.elementToElement(s),n.push(s.model));this._addDefaultH1Conversion(t),t.commands.add("heading",new Ot(t,n))}afterInit(){const t=this.editor,e=t.commands.get("enter"),n=t.config.get("heading.options");e&&this.listenTo(e,"afterExecute",(s,i)=>{const o=t.model.document.selection.getFirstPosition().parent;n.some(r=>o.is("element",r.model))&&!o.is("element",Q)&&o.childCount===0&&i.writer.rename(o,Q)})}_addDefaultH1Conversion(t){t.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:de.low+1})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Rt(a){const t=a.t,e={Paragraph:t("Paragraph"),"Heading 1":t("Heading 1"),"Heading 2":t("Heading 2"),"Heading 3":t("Heading 3"),"Heading 4":t("Heading 4"),"Heading 5":t("Heading 5"),"Heading 6":t("Heading 6")};return a.config.get("heading.options").map(n=>{const s=e[n.title];return s&&s!=n.title&&(n.title=s),n})}class Mt extends p{static get pluginName(){return"HeadingUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=Rt(t),s=e("Choose heading"),i=e("Heading");t.ui.componentFactory.add("heading",o=>{const c={},r=new K,l=t.commands.get("heading"),u=t.commands.get("paragraph"),d=[l];for(const g of n){const f={type:"button",model:new G({label:g.title,class:g.class,role:"menuitemradio",withText:!0})};g.model==="paragraph"?(f.model.bind("isOn").to(u,"value"),f.model.set("commandName","paragraph"),d.push(u)):(f.model.bind("isOn").to(l,"value",h=>h===g.model),f.model.set({commandName:"heading",commandValue:g.model})),r.add(f),c[g.model]=g.title}const m=U(o);return $(m,r,{ariaLabel:i,role:"menu"}),m.buttonView.set({ariaLabel:i,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:i}),m.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),m.bind("isEnabled").toMany(d,"isEnabled",(...g)=>g.some(f=>f)),m.buttonView.bind("label").to(l,"value",u,"value",(g,f)=>{const h=f?"paragraph":g;return typeof h=="boolean"||!c[h]?s:c[h]}),m.buttonView.bind("ariaLabel").to(l,"value",u,"value",(g,f)=>{const h=f?"paragraph":g;return typeof h=="boolean"||!c[h]?i:`${c[h]}, ${i}`}),this.listenTo(m,"execute",g=>{const{commandName:f,commandValue:h}=g.source;t.execute(f,h?{value:h}:void 0),t.editing.view.focus()}),m}),t.ui.componentFactory.add("menuBar:heading",o=>{const c=new W(o),r=t.commands.get("heading"),l=t.commands.get("paragraph"),u=[r],d=new z(o);c.set({class:"ck-heading-dropdown"}),d.set({ariaLabel:e("Heading"),role:"menu"}),c.buttonView.set({label:e("Heading")}),c.panelView.children.add(d);for(const m of n){const g=new j(o,c),f=new _(o);g.children.add(f),d.items.add(g),f.set({isToggleable:!0,label:m.title,role:"menuitemradio",class:m.class}),f.delegate("execute").to(c),f.on("execute",()=>{const h=m.model==="paragraph"?"paragraph":"heading";t.execute(h,{value:m.model}),t.editing.view.focus()}),m.model==="paragraph"?(f.bind("isOn").to(l,"value"),u.push(l)):f.bind("isOn").to(r,"value",h=>h===m.model)}return c.bind("isEnabled").toMany(u,"isEnabled",(...m)=>m.some(g=>g)),c})}}class Ft extends p{static get requires(){return[It,Mt]}static get pluginName(){return"Heading"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const w="SourceEditingMode";class Ht extends p{constructor(e){super(e);b(this,"_elementReplacer");b(this,"_replacedRoots");b(this,"_dataFromRoots");this.set("isSourceEditingMode",!1),this._elementReplacer=new ue,this._replacedRoots=new Map,this._dataFromRoots=new Map,e.config.define("sourceEditing.allowCollaborationFeatures",!1)}static get pluginName(){return"SourceEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[L]}init(){this._checkCompatibility();const e=this.editor,n=e.locale.t;e.ui.componentFactory.add("sourceEditing",()=>{const s=this._createButton(q);return s.set({label:n("Source"),icon:me,tooltip:!0,class:"ck-source-editing-button"}),s}),e.ui.componentFactory.add("menuBar:sourceEditing",()=>{const s=this._createButton(_);return s.set({label:n("Show source"),role:"menuitemcheckbox"}),s}),this._isAllowedToHandleSourceEditingMode()&&(this.on("change:isSourceEditingMode",(s,i,o)=>{o?(this._hideVisibleDialog(),this._showSourceEditing(),this._disableCommands()):(this._hideSourceEditing(),this._enableCommands())}),this.on("change:isEnabled",(s,i,o)=>this._handleReadOnlyMode(!o)),this.listenTo(e,"change:isReadOnly",(s,i,o)=>this._handleReadOnlyMode(o))),e.data.on("get",()=>{this.isSourceEditingMode&&this.updateEditorData()},{priority:"high"})}updateEditorData(){const e=this.editor,n={};for(const[s,i]of this._replacedRoots){const o=this._dataFromRoots.get(s),c=i.dataset.value;o!==c&&(n[s]=c,this._dataFromRoots.set(s,c))}Object.keys(n).length&&e.data.set(n,{batchType:{isUndoable:!0},suppressErrorInCollaboration:!0})}_checkCompatibility(){const e=this.editor,n=e.config.get("sourceEditing.allowCollaborationFeatures");if(!n&&e.plugins.has("RealTimeCollaborativeEditing"))throw new ge("source-editing-incompatible-with-real-time-collaboration",null);!n&&["CommentsEditing","TrackChangesEditing","RevisionHistory"].some(i=>e.plugins.has(i))&&console.warn("You initialized the editor with the source editing feature and at least one of the collaboration features. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the collaboration features."),e.plugins.has("RestrictedEditingModeEditing")&&console.warn("You initialized the editor with the source editing feature and restricted editing feature. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the restricted editing feature.")}_showSourceEditing(){const e=this.editor,n=e.editing.view,s=e.model;s.change(i=>{i.setSelection(null),i.removeSelectionAttribute(s.document.selection.getAttributeKeys())});for(const[i,o]of n.domRoots){const c=Nt(e.data.get({rootName:i})),r=V(o.ownerDocument,"textarea",{rows:"1","aria-label":"Source code editing area"}),l=V(o.ownerDocument,"div",{class:"ck-source-editing-area","data-value":c},[r]);r.value=c,r.setSelectionRange(0,0),r.addEventListener("input",()=>{l.dataset.value=r.value,e.ui.update()}),n.change(u=>{const d=n.document.getRoot(i);u.addClass("ck-hidden",d)}),e.ui.setEditableElement("sourceEditing:"+i,r),this._replacedRoots.set(i,l),this._elementReplacer.replace(o,l),this._dataFromRoots.set(i,c)}this._hideDocumentOutline(),this._refreshAnnotationsVisibility(),this._focusSourceEditing()}_hideSourceEditing(){const n=this.editor.editing.view;this.updateEditorData(),n.change(s=>{for(const[i]of this._replacedRoots)s.removeClass("ck-hidden",n.document.getRoot(i))}),this._elementReplacer.restore(),this._replacedRoots.clear(),this._dataFromRoots.clear(),this._showDocumentOutline(),this._refreshAnnotationsVisibility(),n.focus()}_hideDocumentOutline(){this.editor.plugins.has("DocumentOutlineUI")&&(this.editor.plugins.get("DocumentOutlineUI").view.element.style.display="none")}_showDocumentOutline(){this.editor.plugins.has("DocumentOutlineUI")&&(this.editor.plugins.get("DocumentOutlineUI").view.element.style.display="")}_refreshAnnotationsVisibility(){this.editor.plugins.has("Annotations")&&this.editor.plugins.get("Annotations").refreshVisibility()}_focusSourceEditing(){const e=this.editor,[n]=this._replacedRoots.values(),s=n.querySelector("textarea");e.editing.view.document.isFocused=!1,s.focus()}_disableCommands(){const e=this.editor;for(const n of e.commands.commands())n.forceDisabled(w);e.plugins.has("CommentsArchiveUI")&&e.plugins.get("CommentsArchiveUI").forceDisabled(w)}_enableCommands(){const e=this.editor;for(const n of e.commands.commands())n.clearForceDisabled(w);e.plugins.has("CommentsArchiveUI")&&e.plugins.get("CommentsArchiveUI").clearForceDisabled(w)}_handleReadOnlyMode(e){if(this.isSourceEditingMode)for(const[,n]of this._replacedRoots)n.querySelector("textarea").readOnly=e}_isAllowedToHandleSourceEditingMode(){const n=this.editor.ui.view.editable;return n&&!n.hasExternalElement}_hideVisibleDialog(){if(this.editor.plugins.has("Dialog")){const e=this.editor.plugins.get("Dialog");e.isOpen&&e.hide()}}_createButton(e){const n=this.editor,s=new e(n.locale);return s.set({withText:!0,isToggleable:!0}),s.bind("isOn").to(this,"isSourceEditingMode"),s.bind("isEnabled").to(this,"isEnabled",n,"isReadOnly",n.plugins.get(L),"hasAny",(i,o,c)=>!(!i||o||c)),this.listenTo(s,"execute",()=>{this.isSourceEditingMode=!this.isSourceEditingMode}),s}}function Nt(a){return Qt(a)?fe(a):a}function Qt(a){return a.startsWith("<")}const qt={components:{Ckeditor:he},props:{modelValue:{type:String},config:{type:Object,default:()=>{}},assets:{type:Object,default:()=>{}},readonly:{type:Boolean,default:!1},context:{type:Object}},emits:["update:modelValue","error"],data(){return{editor:rt,visible:!1}},beforeUnmount(){this.visible=!1},computed:{ckconfig(){return{licenseKey:"GPL",plugins:[Ke,Ge,Je,Ye,Xe,Ze,et,Ft,J,tt,nt,ot,kt,it,Dt,st,at,ct,Ht],toolbar:["undo","redo","removeFormat","|","heading","|","bold","italic","strikethrough","link","code","|","codeBlock","blockQuote","|","bulletedList","numberedList","|","sourceEditing","fullscreen"],translations:[pe,be,ke,ve,Be,Ee,we,Ce,Se,_e,xe,ye,Ae,Pe,Le,Ve,Te,De,Oe,Ie,Re,Me,Fe,He,Ne,Qe,qe,Ue,$e,We,ze,je],language:{ui:this.$vuetify.locale.current}}},rules(){return[a=>!this.config.min||+(a==null?void 0:a.length)>=+this.config.min||this.$gettext("Minimum length is %{num} characters",{num:this.config.min}),a=>!this.config.max||+(a==null?void 0:a.length)<=+this.config.max||this.$gettext("Maximum length is %{num} characters",{num:this.config.max})]}},methods:{show(a){this.visible=a},update(a){this.modelValue!=a&&this.$emit("update:modelValue",a)}},watch:{modelValue:{immediate:!0,handler(a){this.$emit("error",!this.rules.every(t=>t(a??this.config.default??"")===!0))}}}},Ut={key:0};function $t(a,t,e,n,s,i){const o=ft("ckeditor"),c=gt("observe-visibility");return dt((D(),T("div",null,[s.visible?(D(),T("div",Ut,[ut(o,{config:i.ckconfig,editor:s.editor,disabled:e.readonly,modelValue:e.modelValue??e.config.default??"","onUpdate:modelValue":t[0]||(t[0]=r=>i.update(r))},null,8,["config","editor","disabled","modelValue"])])):mt("",!0)])),[[c,i.show]])}const Kt=lt(qt,[["render",$t]]);export{Kt as default};
